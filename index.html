<!DOCTYPE html>
<html>

   <head>
      <meta charset="utf-8" />
      <script src="./webserver/js/three.min.js"></script>
      <script src="./webserver/js/ColladaLoader2.min.js"></script>
      <script src="./webserver/js/STLLoader.min.js"></script>
      <script src="./webserver/js/eventemitter2.min.js"></script>
      <script src="./webserver/js/roslib.min.js"></script>
      <script src="./webserver/js/ros3d.min.js"></script>
      <script src="./webserver/js/jointstatepublisher.min.js"></script>
      <script>
         function init() {
            var ros = new ROSLIB.Ros({
               url: 'ws://ros-mini:9090'
            });

            var jsp = new JOINTSTATEPUBLISHER.JointStatePublisher({
               ros: ros,
               divID: 'sliders'
            });

            var viewer = new ROS3D.Viewer({
               divID: 'urdf',
               width: window.innerWidth,
               height: window.innerHeight,
               antialias: true,
               background: '#002233'
            });
            viewer.addObject(new ROS3D.Grid({
               color: '#0181c4',
               cellSize: 0.5,
               num_cells: 20
            }));
            /*
                var param = new ROSLIB.Param({
                  ros : ros,
                  name : 'robot_description'
                });

                param.get(function(param) {
                  var urdfModel = new ROSLIB.UrdfModel({
                    string : param
                  });
                  console.log(urdfModel);
                });*/

            var tfClient = new ROSLIB.TFClient({
               ros: ros,
               angularThres: 0.01,
               transThres: 0.01,
               rate: 10.0,
               fixedFrame: '/map'
            });

            new ROS3D.UrdfClient({
               ros: ros,
               tfClient: tfClient,
               path: './src/',
               rootObject: viewer.scene,
               loader: ROS3D.COLLADA_LOADER
            });
         }
      </script>
   </head>

   <body onload="init()">
      <div id="sliders" style="float: right"></div>
      <div id="urdf"></div>
   </body>

</html>
